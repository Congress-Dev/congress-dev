# Alembic Migrations

This folder contains the database migration scripts managed by Alembic, a database migration tool for SQLAlchemy. Below are the common commands you'll use to manage migrations and the database schema.

---

## Prerequisites
Make sure you have Alembic installed. You can install it with:
```bash
pip install alembic
```

---

## Common Commands

### 1. Upgrade the Database to the Latest Version (Head)
To apply all pending migrations and bring the database schema up to date:
```bash
alembic upgrade head
```

This will apply all migrations from the current version to the latest (head).

---

### 2. Autogenerate a New Migration
If youâ€™ve made changes to your SQLAlchemy models and want to generate a migration script:
1. Ensure your models are properly imported in the environment script (`env.py`).
2. Run the following command:
   ```bash
   alembic revision --autogenerate -m "Your migration message here"
   ```
   - Replace `"Your migration message here"` with a short description of the migration (e.g., "add users table").
   - The autogenerated script will be created in the `versions/` folder. Review the script to ensure accuracy before applying.

---

### 3. Downgrade the Database
If you need to revert a migration, use the following command to downgrade by one version:
```bash
alembic downgrade -1
```

To downgrade to a specific revision (e.g., `abc123def456`), use:
```bash
alembic downgrade abc123def456
```

---

## Additional Tips

- To check the current database version:
  ```bash
  alembic current
  ```

- To view the migration history:
  ```bash
  alembic history
  ```

- To show detailed information about a specific revision:
  ```bash
  alembic show <revision_id>
  ```

---

## Troubleshooting

- **Migration is not reflecting changes to models**:
  Ensure all model imports and metadata configurations are correctly set up in `env.py`.

- **Unexpected issues after upgrading/downgrading**:
  Review the applied migration scripts and confirm that they match your schema changes.